<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Feng Shui Consultant - Source Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #222;
            background-color: #ffffff;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .back-nav {
            margin-bottom: 20px;
        }

        .back-nav a {
            color: #007BFF;
            text-decoration: none;
            font-size: 1rem;
        }

        .back-nav a:hover {
            text-decoration: underline;
        }

        .project-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            border-radius: 10px;
        }

        .project-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .project-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .badges {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .badge {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .content-section {
            margin: 40px 0;
            padding: 30px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 5px solid #FF9800;
        }

        .content-section h2 {
            color: #FF9800;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .content-section h3 {
            color: #333;
            margin: 20px 0 10px 0;
            font-size: 1.3rem;
        }

        .highlight-box {
            background: linear-gradient(135deg, #FFF8E1, #FFF3C4);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #FF9800;
            margin: 20px 0;
        }

        .code-container {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .code-header {
            color: #569cd6;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        .code-block {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            color: #d4d4d4;
        }

        .code-comment {
            color: #6a9955;
            font-style: italic;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .code-function {
            color: #dcdcaa;
        }

        .code-number {
            color: #b5cea8;
        }

        .demo-links {
            text-align: center;
            margin: 30px 0;
        }

        .demo-btn {
            display: inline-block;
            background-color: #007BFF;
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 5px;
            margin: 0 10px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .demo-btn:hover {
            background-color: #0056b3;
        }

        .demo-btn.secondary {
            background-color: #28a745;
        }

        .demo-btn.secondary:hover {
            background-color: #218838;
        }

        @media (max-width: 768px) {
            .project-header h1 {
                font-size: 2rem;
            }

            .project-header p {
                font-size: 1rem;
            }

            .demo-btn {
                margin: 5px;
                padding: 10px 20px;
            }

            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="back-nav">
            <a href="fengshui-chatbot.html">‚Üê Back to Project Overview</a>
        </nav>

        <div class="project-header">
            <h1>üè° Professional Feng Shui Consultant</h1>
            <p>Core Source Code & Spatial Harmony Intelligence Implementation</p>

            <div class="badges">
                <span class="badge">Python 3.9</span>
                <span class="badge">Streamlit</span>
                <span class="badge">Gemini AI</span>
                <span class="badge">Feng Shui Analysis</span>
            </div>
        </div>

        <div class="highlight-box">
            <h3>üîç About This Code Showcase</h3>
            <p><strong>This curated code snippet demonstrates how the Professional Feng Shui Consultant analyzes living spaces, applies traditional Feng Shui principles, and provides personalized spatial harmony recommendations.</strong></p>
            <p>Full deployment scripts, API integrations, and proprietary details are omitted for clarity and security. This showcase highlights the core spatial analysis and traditional Feng Shui wisdom algorithms.</p>
        </div>

        <div class="content-section">
            <h2>üè† Core Algorithm: Spatial Harmony Analysis Engine</h2>
            <p>The foundation of the Professional Feng Shui Consultant is its ability to analyze spatial layouts, identify energy flow patterns, and provide authentic Feng Shui guidance based on ancient Chinese geomancy principles:</p>

            <div class="code-container">
                <div class="code-header">üìÑ fengshui_analyzer.py</div>
                <div class="code-block">
<span class="code-keyword">import</span> google.generativeai <span class="code-keyword">as</span> genai
<span class="code-keyword">import</span> streamlit <span class="code-keyword">as</span> st
<span class="code-keyword">from</span> typing <span class="code-keyword">import</span> Dict, List, Optional, Tuple
<span class="code-keyword">import</span> math

<span class="code-keyword">class</span> <span class="code-function">FengShuiAnalyzer</span>:
    <span class="code-string">"""
    Professional Feng Shui analysis engine that combines traditional Chinese geomancy
    with modern spatial intelligence for comprehensive home and office harmony assessment.
    """</span>

    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(self, api_key: str):
        genai.configure(api_key=api_key)
        self.wisdom_ai = genai.GenerativeModel(<span class="code-string">'gemini-pro'</span>)

        <span class="code-comment"># Traditional Bagua (ÂÖ´Âç¶) map with life aspects</span>
        self.bagua_map = {
            <span class="code-string">'north'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'water'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'career'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'Âùé (Kan)'</span>},
            <span class="code-string">'northeast'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'earth'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'knowledge'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'ËâÆ (Gen)'</span>},
            <span class="code-string">'east'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'wood'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'family'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'Èúá (Zhen)'</span>},
            <span class="code-string">'southeast'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'wood'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'wealth'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'Â∑Ω (Xun)'</span>},
            <span class="code-string">'south'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'fire'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'fame'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'Á¶ª (Li)'</span>},
            <span class="code-string">'southwest'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'earth'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'love'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'Âù§ (Kun)'</span>},
            <span class="code-string">'west'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'metal'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'children'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'ÂÖë (Dui)'</span>},
            <span class="code-string">'northwest'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'metal'</span>, <span class="code-string">'aspect'</span>: <span class="code-string">'helpful_people'</span>, <span class="code-string">'chinese'</span>: <span class="code-string">'‰πæ (Qian)'</span>}
        }

        <span class="code-comment"># Five elements relationships for energy flow analysis</span>
        self.element_relationships = {
            <span class="code-string">'productive_cycle'</span>: {
                <span class="code-string">'water'</span>: <span class="code-string">'wood'</span>,  <span class="code-comment"># Water nourishes wood</span>
                <span class="code-string">'wood'</span>: <span class="code-string">'fire'</span>,   <span class="code-comment"># Wood feeds fire</span>
                <span class="code-string">'fire'</span>: <span class="code-string">'earth'</span>,  <span class="code-comment"># Fire creates earth (ash)</span>
                <span class="code-string">'earth'</span>: <span class="code-string">'metal'</span>, <span class="code-comment"># Earth contains metal</span>
                <span class="code-string">'metal'</span>: <span class="code-string">'water'</span>  <span class="code-comment"># Metal collects water</span>
            },
            <span class="code-string">'destructive_cycle'</span>: {
                <span class="code-string">'water'</span>: <span class="code-string">'fire'</span>,   <span class="code-comment"># Water extinguishes fire</span>
                <span class="code-string">'fire'</span>: <span class="code-string">'metal'</span>,  <span class="code-comment"># Fire melts metal</span>
                <span class="code-string">'metal'</span>: <span class="code-string">'wood'</span>,  <span class="code-comment"># Metal cuts wood</span>
                <span class="code-string">'wood'</span>: <span class="code-string">'earth'</span>,  <span class="code-comment"># Wood depletes earth</span>
                <span class="code-string">'earth'</span>: <span class="code-string">'water'</span>  <span class="code-comment"># Earth absorbs water</span>
            }
        }

        <span class="code-comment"># Traditional Feng Shui colors and their meanings</span>
        self.fengshui_colors = {
            <span class="code-string">'red'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'fire'</span>, <span class="code-string">'energy'</span>: <span class="code-string">'passion, luck, protection'</span>},
            <span class="code-string">'green'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'wood'</span>, <span class="code-string">'energy'</span>: <span class="code-string">'growth, health, new beginnings'</span>},
            <span class="code-string">'blue'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'water'</span>, <span class="code-string">'energy'</span>: <span class="code-string">'calm, wisdom, career flow'</span>},
            <span class="code-string">'white'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'metal'</span>, <span class="code-string">'energy'</span>: <span class="code-string">'purity, clarity, precision'</span>},
            <span class="code-string">'yellow'</span>: {<span class="code-string">'element'</span>: <span class="code-string">'earth'</span>, <span class="code-string">'energy'</span>: <span class="code-string">'stability, grounding, nourishment'</span>}
        }

    <span class="code-keyword">def</span> <span class="code-function">analyze_space_harmony</span>(self, space_description: str, room_type: str, goals: List[str]) -> Dict:
        <span class="code-string">"""
        Comprehensive Feng Shui analysis of living or working spaces.
        Identifies energy flow patterns, elemental imbalances, and provides traditional remedies.

        Args:
            space_description: Detailed description of the space layout and features
            room_type: Type of room (bedroom, living room, office, etc.)
            goals: User's life goals and areas of focus

        Returns:
            Dictionary containing detailed Feng Shui analysis and recommendations
        """</span>

        <span class="code-comment"># Step 1: Analyze spatial energy flow and identify key areas</span>
        energy_analysis = self._analyze_chi_flow(space_description, room_type)

        <span class="code-comment"># Step 2: Map space to Bagua sectors for life aspect analysis</span>
        bagua_mapping = self._map_space_to_bagua(space_description, goals)

        <span class="code-comment"># Step 3: Identify elemental imbalances and conflicts</span>
        elemental_analysis = self._analyze_elemental_balance(space_description)

        <span class="code-comment"># Step 4: Generate professional Feng Shui recommendations</span>
        recommendations = <span class="code-keyword">await</span> self._generate_fengshui_recommendations(
            energy_analysis, bagua_mapping, elemental_analysis, goals
        )

        <span class="code-comment"># Step 5: Create implementation plan with priorities</span>
        implementation_plan = self._create_implementation_plan(recommendations)

        <span class="code-keyword">return</span> {
            <span class="code-string">'space_analysis'</span>: {
                <span class="code-string">'energy_flow'</span>: energy_analysis,
                <span class="code-string">'bagua_sectors'</span>: bagua_mapping,
                <span class="code-string">'elemental_balance'</span>: elemental_analysis
            },
            <span class="code-string">'recommendations'</span>: recommendations,
            <span class="code-string">'implementation_plan'</span>: implementation_plan,
            <span class="code-string">'harmony_score'</span>: self._calculate_harmony_score(energy_analysis, elemental_analysis),
            <span class="code-string">'traditional_wisdom'</span>: <span class="code-keyword">await</span> self._provide_traditional_wisdom(room_type, goals)
        }

    <span class="code-keyword">def</span> <span class="code-function">_analyze_chi_flow</span>(self, space_description: str, room_type: str) -> Dict:
        <span class="code-string">"""
        Analyze the flow of Chi (life energy) through the space.
        Identifies energy blockages, rushing chi, and stagnant areas.
        """</span>

        <span class="code-comment"># Parse spatial features that affect energy flow</span>
        flow_factors = {
            <span class="code-string">'entry_points'</span>: self._identify_entry_points(space_description),
            <span class="code-string">'pathways'</span>: self._analyze_movement_paths(space_description),
            <span class="code-string">'energy_blocks'</span>: self._identify_energy_blockages(space_description),
            <span class="code-string">'light_sources'</span>: self._analyze_natural_light(space_description),
            <span class="code-string">'clutter_areas'</span>: self._identify_clutter_zones(space_description)
        }

        <span class="code-comment"># Calculate Chi flow quality based on traditional principles</span>
        chi_quality = self._calculate_chi_quality(flow_factors, room_type)

        <span class="code-keyword">return</span> {
            <span class="code-string">'flow_analysis'</span>: flow_factors,
            <span class="code-string">'chi_quality_score'</span>: chi_quality,
            <span class="code-string">'energy_patterns'</span>: self._identify_energy_patterns(flow_factors),
            <span class="code-string">'improvement_areas'</span>: self._prioritize_flow_improvements(flow_factors)
        }

    <span class="code-keyword">def</span> <span class="code-function">_map_space_to_bagua</span>(self, space_description: str, goals: List[str]) -> Dict:
        <span class="code-string">"""
        Map the physical space to the Bagua (ÂÖ´Âç¶) for life aspect analysis.
        Identifies which areas of the space correspond to different life goals.
        """</span>

        <span class="code-comment"># Determine primary entrance and orientation for Bagua overlay</span>
        entrance_direction = self._determine_entrance_direction(space_description)

        <span class="code-comment"># Map each Bagua sector to physical space areas</span>
        bagua_sectors = {}
        <span class="code-keyword">for</span> direction, sector_info <span class="code-keyword">in</span> self.bagua_map.items():
            bagua_sectors[direction] = {
                <span class="code-string">'life_aspect'</span>: sector_info[<span class="code-string">'aspect'</span>],
                <span class="code-string">'element'</span>: sector_info[<span class="code-string">'element'</span>],
                <span class="code-string">'chinese_name'</span>: sector_info[<span class="code-string">'chinese'</span>],
                <span class="code-string">'physical_area'</span>: self._identify_physical_area(space_description, direction),
                <span class="code-string">'user_priority'</span>: sector_info[<span class="code-string">'aspect'</span>] <span class="code-keyword">in</span> [goal.lower() <span class="code-keyword">for</span> goal <span class="code-keyword">in</span> goals],
                <span class="code-string">'current_condition'</span>: self._assess_sector_condition(space_description, direction)
            }

        <span class="code-keyword">return</span> {
            <span class="code-string">'entrance_direction'</span>: entrance_direction,
            <span class="code-string">'sectors'</span>: bagua_sectors,
            <span class="code-string">'priority_sectors'</span>: [s <span class="code-keyword">for</span> s <span class="code-keyword">in</span> bagua_sectors <span class="code-keyword">if</span> bagua_sectors[s][<span class="code-string">'user_priority'</span>]],
            <span class="code-string">'sector_harmony'</span>: self._calculate_sector_harmony(bagua_sectors)
        }

    <span class="code-keyword">async</span> <span class="code-function">_generate_fengshui_recommendations</span>(
        self, energy_analysis: Dict, bagua_mapping: Dict, elemental_analysis: Dict, goals: List[str]
    ) -> Dict:
        <span class="code-string">"""
        Generate comprehensive Feng Shui recommendations based on traditional principles.
        Provides specific, actionable advice for improving space harmony and life goals.
        """</span>

        recommendation_prompt = f<span class="code-string">"""
        As a professional Feng Shui consultant, provide detailed recommendations based on:

        ENERGY FLOW ANALYSIS:
        Chi Quality Score: {energy_analysis['chi_quality_score']}/10
        Energy Blockages: {energy_analysis['flow_analysis']['energy_blocks']}
        Flow Patterns: {energy_analysis['energy_patterns']}

        BAGUA MAPPING:
        Priority Life Areas: {bagua_mapping['priority_sectors']}
        Sector Conditions: {bagua_mapping['sector_harmony']}

        ELEMENTAL BALANCE:
        Element Distribution: {elemental_analysis['element_distribution']}
        Imbalances: {elemental_analysis['imbalances']}

        USER GOALS: {', '.join(goals)}

        Provide recommendations in these categories:

        1. Á©∫Èó¥Â∏ÉÂ±Ä (Spatial Layout): Furniture placement and room arrangement
        2. Ëâ≤ÂΩ©Ë∞ÉÂíå (Color Harmony): Feng Shui colors for different areas
        3. ÂÖÉÁ¥†Âπ≥Ë°° (Element Balance): Adding/reducing elements for harmony
        4. ËÉΩÈáèÊµÅÂä® (Energy Flow): Improving Chi circulation
        5. Ë£ÖÈ•∞Âª∫ËÆÆ (Decoration Advice): Feng Shui objects and symbols
        6. Ê§çÁâ©ÈÖçÁΩÆ (Plant Placement): Living energy enhancers
        7. ÁÖßÊòé‰ºòÂåñ (Lighting Optimization): Natural and artificial light balance

        Include traditional Feng Shui principles and modern practical applications.
        Provide specific, actionable steps with reasoning based on ancient wisdom.
        """</span>

        response = <span class="code-keyword">await</span> self.wisdom_ai.generate_content_async(recommendation_prompt)

        <span class="code-keyword">return</span> {
            <span class="code-string">'detailed_recommendations'</span>: response.text,
            <span class="code-string">'priority_actions'</span>: self._extract_priority_actions(response.text),
            <span class="code-string">'element_suggestions'</span>: self._generate_element_suggestions(elemental_analysis),
            <span class="code-string">'color_palette'</span>: self._recommend_color_palette(bagua_mapping, goals),
            <span class="code-string">'symbolic_enhancements'</span>: self._suggest_feng_shui_symbols(goals)
        }
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>üåø Advanced Elemental Balance Engine</h2>
            <p>The elemental balance system analyzes the five elements (Wu Xing) within spaces and provides precise recommendations for achieving optimal energy harmony:</p>

            <div class="code-container">
                <div class="code-header">üìÑ elemental_analyzer.py</div>
                <div class="code-block">
<span class="code-keyword">class</span> <span class="code-function">ElementalAnalyzer</span>:
    <span class="code-keyword">def</span> <span class="code-function">_analyze_elemental_balance</span>(self, space_description: str) -> Dict:
        <span class="code-string">"""
        Analyze the distribution and balance of five elements within the space.
        Identifies elemental excess, deficiency, and conflicts for harmony optimization.
        """</span>

        <span class="code-comment"># Identify elements present in the space through materials and colors</span>
        element_presence = {
            <span class="code-string">'wood'</span>: self._detect_wood_elements(space_description),
            <span class="code-string">'fire'</span>: self._detect_fire_elements(space_description),
            <span class="code-string">'earth'</span>: self._detect_earth_elements(space_description),
            <span class="code-string">'metal'</span>: self._detect_metal_elements(space_description),
            <span class="code-string">'water'</span>: self._detect_water_elements(space_description)
        }

        <span class="code-comment"># Calculate elemental distribution and identify imbalances</span>
        element_scores = self._calculate_element_scores(element_presence)
        imbalances = self._identify_elemental_imbalances(element_scores)

        <span class="code-comment"># Analyze element relationships and interactions</span>
        element_interactions = self._analyze_element_interactions(element_scores)

        <span class="code-keyword">return</span> {
            <span class="code-string">'element_distribution'</span>: element_scores,
            <span class="code-string">'detected_elements'</span>: element_presence,
            <span class="code-string">'imbalances'</span>: imbalances,
            <span class="code-string">'interactions'</span>: element_interactions,
            <span class="code-string">'balance_score'</span>: self._calculate_balance_score(element_scores),
            <span class="code-string">'correction_needs'</span>: self._determine_corrections(imbalances)
        }

    <span class="code-keyword">def</span> <span class="code-function">_detect_wood_elements</span>(self, description: str) -> Dict:
        <span class="code-string">"""
        Detect wood element presence through furniture, plants, and green colors.
        Wood represents growth, flexibility, and upward energy movement.
        """</span>

        wood_indicators = {
            <span class="code-string">'furniture'</span>: [<span class="code-string">'wooden'</span>, <span class="code-string">'bamboo'</span>, <span class="code-string">'wicker'</span>, <span class="code-string">'teak'</span>, <span class="code-string">'oak'</span>],
            <span class="code-string">'plants'</span>: [<span class="code-string">'plant'</span>, <span class="code-string">'tree'</span>, <span class="code-string">'flower'</span>, <span class="code-string">'garden'</span>, <span class="code-string">'bamboo'</span>],
            <span class="code-string">'colors'</span>: [<span class="code-string">'green'</span>, <span class="code-string">'forest'</span>, <span class="code-string">'emerald'</span>, <span class="code-string">'sage'</span>],
            <span class="code-string">'shapes'</span>: [<span class="code-string">'tall'</span>, <span class="code-string">'rectangular'</span>, <span class="code-string">'columnar'</span>, <span class="code-string">'vertical'</span>]
        }

        detected_count = <span class="code-number">0</span>
        details = []

        <span class="code-keyword">for</span> category, indicators <span class="code-keyword">in</span> wood_indicators.items():
            <span class="code-keyword">for</span> indicator <span class="code-keyword">in</span> indicators:
                <span class="code-keyword">if</span> indicator.lower() <span class="code-keyword">in</span> description.lower():
                    detected_count += <span class="code-number">1</span>
                    details.append(f<span class="code-string">"{category}: {indicator}"</span>)

        <span class="code-keyword">return</span> {
            <span class="code-string">'strength'</span>: min(detected_count * <span class="code-number">0.2</span>, <span class="code-number">1.0</span>),  <span class="code-comment"># Normalize to 0-1 scale</span>
            <span class="code-string">'indicators_found'</span>: details,
            <span class="code-string">'element_quality'</span>: <span class="code-string">'abundant'</span> <span class="code-keyword">if</span> detected_count > <span class="code-number">3</span> <span class="code-keyword">else</span> <span class="code-string">'moderate'</span> <span class="code-keyword">if</span> detected_count > <span class="code-number">1</span> <span class="code-keyword">else</span> <span class="code-string">'minimal'</span>
        }

    <span class="code-keyword">def</span> <span class="code-function">_analyze_element_interactions</span>(self, element_scores: Dict) -> Dict:
        <span class="code-string">"""
        Analyze interactions between elements using traditional cycle principles.
        Identifies supportive and conflicting element relationships.
        """</span>

        interactions = {
            <span class="code-string">'productive_relationships'</span>: [],
            <span class="code-string">'destructive_relationships'</span>: [],
            <span class="code-string">'overall_harmony'</span>: <span class="code-number">0</span>
        }

        <span class="code-comment"># Check productive cycle relationships</span>
        <span class="code-keyword">for</span> element, produces <span class="code-keyword">in</span> self.element_relationships[<span class="code-string">'productive_cycle'</span>].items():
            element_strength = element_scores.get(element, <span class="code-number">0</span>)
            produced_strength = element_scores.get(produces, <span class="code-number">0</span>)

            <span class="code-keyword">if</span> element_strength > <span class="code-number">0.3</span> <span class="code-keyword">and</span> produced_strength > <span class="code-number">0.3</span>:
                interactions[<span class="code-string">'productive_relationships'</span>].append({
                    <span class="code-string">'producer'</span>: element,
                    <span class="code-string">'produced'</span>: produces,
                    <span class="code-string">'strength'</span>: min(element_strength, produced_strength),
                    <span class="code-string">'effect'</span>: <span class="code-string">'harmonious energy flow'</span>
                })

        <span class="code-comment"># Check destructive cycle relationships</span>
        <span class="code-keyword">for</span> element, destroys <span class="code-keyword">in</span> self.element_relationships[<span class="code-string">'destructive_cycle'</span>].items():
            element_strength = element_scores.get(element, <span class="code-number">0</span>)
            destroyed_strength = element_scores.get(destroys, <span class="code-number">0</span>)

            <span class="code-keyword">if</span> element_strength > <span class="code-number">0.5</span> <span class="code-keyword">and</span> destroyed_strength > <span class="code-number">0.5</span>:
                interactions[<span class="code-string">'destructive_relationships'</span>].append({
                    <span class="code-string">'destroyer'</span>: element,
                    <span class="code-string">'destroyed'</span>: destroys,
                    <span class="code-string">'conflict_level'</span>: element_strength * destroyed_strength,
                    <span class="code-string">'effect'</span>: <span class="code-string">'energy conflict'</span>
                })

        <span class="code-comment"># Calculate overall harmony score</span>
        productive_score = len(interactions[<span class="code-string">'productive_relationships'</span>]) * <span class="code-number">0.2</span>
        destructive_penalty = len(interactions[<span class="code-string">'destructive_relationships'</span>]) * <span class="code-number">0.15</span>
        interactions[<span class="code-string">'overall_harmony'</span>] = max(<span class="code-number">0</span>, productive_score - destructive_penalty)

        <span class="code-keyword">return</span> interactions

    <span class="code-keyword">def</span> <span class="code-function">_recommend_color_palette</span>(self, bagua_mapping: Dict, goals: List[str]) -> Dict:
        <span class="code-string">"""
        Recommend Feng Shui color palette based on Bagua sectors and user goals.
        Considers elemental associations and traditional color meanings.
        """</span>

        recommended_colors = {}
        priority_sectors = bagua_mapping[<span class="code-string">'priority_sectors'</span>]

        <span class="code-keyword">for</span> sector <span class="code-keyword">in</span> priority_sectors:
            sector_info = bagua_mapping[<span class="code-string">'sectors'</span>][sector]
            element = sector_info[<span class="code-string">'element'</span>]

            <span class="code-comment"># Get colors that support the sector's element</span>
            supporting_colors = self._get_element_supporting_colors(element)

            recommended_colors[sector] = {
                <span class="code-string">'life_aspect'</span>: sector_info[<span class="code-string">'life_aspect'</span>],
                <span class="code-string">'primary_colors'</span>: supporting_colors[<span class="code-string">'primary'</span>],
                <span class="code-string">'accent_colors'</span>: supporting_colors[<span class="code-string">'accent'</span>],
                <span class="code-string">'avoid_colors'</span>: supporting_colors[<span class="code-string">'avoid'</span>],
                <span class="code-string">'color_application'</span>: self._suggest_color_application(sector_info[<span class="code-string">'life_aspect'</span>])
            }

        <span class="code-keyword">return</span> {
            <span class="code-string">'sector_colors'</span>: recommended_colors,
            <span class="code-string">'overall_palette'</span>: self._create_harmonious_palette(recommended_colors),
            <span class="code-string">'color_implementation_tips'</span>: self._provide_color_tips()
        }

    <span class="code-keyword">def</span> <span class="code-function">_suggest_feng_shui_symbols</span>(self, goals: List[str]) -> Dict:
        <span class="code-string">"""
        Suggest traditional Feng Shui symbols and objects based on user goals.
        Includes placement guidance and symbolic meanings.
        """</span>

        symbol_recommendations = {}

        goal_symbols = {
            <span class="code-string">'wealth'</span>: {
                <span class="code-string">'symbols'</span>: [<span class="code-string">'Money tree'</span>, <span class="code-string">'Three-legged toad'</span>, <span class="code-string">'Dragon'</span>, <span class="code-string">'Citrine crystal'</span>],
                <span class="code-string">'placement'</span>: <span class="code-string">'Southeast corner'</span>,
                <span class="code-string">'element'</span>: <span class="code-string">'wood'</span>
            },
            <span class="code-string">'love'</span>: {
                <span class="code-string">'symbols'</span>: [<span class="code-string">'Mandarin ducks'</span>, <span class="code-string">'Rose quartz'</span>, <span class="code-string">'Peony flowers'</span>, <span class="code-string">'Double happiness symbol'</span>],
                <span class="code-string">'placement'</span>: <span class="code-string">'Southwest corner'</span>,
                <span class="code-string">'element'</span>: <span class="code-string">'earth'</span>
            },
            <span class="code-string">'career'</span>: {
                <span class="code-string">'symbols'</span>: [<span class="code-string">'Water fountain'</span>, <span class="code-string">'Black tortoise'</span>, <span class="code-string">'Bamboo'</span>, <span class="code-string">'Aquarium'</span>],
                <span class="code-string">'placement'</span>: <span class="code-string">'North area'</span>,
                <span class="code-string">'element'</span>: <span class="code-string">'water'</span>
            }
        }

        <span class="code-keyword">for</span> goal <span class="code-keyword">in</span> goals:
            goal_lower = goal.lower()
            <span class="code-keyword">if</span> goal_lower <span class="code-keyword">in</span> goal_symbols:
                symbol_recommendations[goal] = goal_symbols[goal_lower]

        <span class="code-keyword">return</span> symbol_recommendations
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>‚öôÔ∏è Technical Implementation Notes</h2>
            <h3>Key Algorithms & Innovations</h3>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li><strong>Chi Flow Analysis:</strong> Advanced spatial analysis algorithms for identifying energy patterns and blockages</li>
                <li><strong>Bagua Mapping:</strong> Traditional Chinese geomancy principles applied to modern living spaces</li>
                <li><strong>Elemental Balance:</strong> Five element theory (Wu Xing) implementation for holistic space harmony</li>
                <li><strong>Cultural Intelligence:</strong> Authentic Feng Shui wisdom integrated with practical modern applications</li>
                <li><strong>Personalized Recommendations:</strong> Goal-oriented analysis system tailored to individual life aspirations</li>
            </ul>

            <h3>Why This Approach Works</h3>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li><strong>Traditional Authenticity:</strong> Based on authentic Chinese Feng Shui principles and ancient wisdom</li>
                <li><strong>Holistic Analysis:</strong> Comprehensive approach covering energy flow, color, symbols, and spatial arrangement</li>
                <li><strong>Practical Application:</strong> Actionable recommendations that can be implemented in real living spaces</li>
                <li><strong>Personalized Guidance:</strong> Tailored advice based on individual goals and life circumstances</li>
            </ul>
        </div>

        <div class="demo-links">
            <a href="https://fengshui-chatbot-169218045868.us-west1.run.app/" target="_blank" class="demo-btn">üöÄ Try Live Demo</a>
            <a href="fengshui-chatbot.html" class="demo-btn secondary">üìñ View Full Project Details</a>
        </div>

        <nav class="back-nav" style="text-align: center; margin-top: 40px;">
            <a href="index.html">‚Üê Back to Portfolio</a> |
            <a href="fengshui-chatbot.html">View Project Overview</a>
        </nav>
    </div>
</body>
</html>